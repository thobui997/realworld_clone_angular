(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{rZHr:function(t,e,n){"use strict";n.r(e),n.d(e,"ArticleModule",(function(){return I}));var i=n("ofXK"),c=n("tyNb"),r=n("wO+i"),o=n("eIep"),l=n("vkgz"),b=n("nYR2"),a=n("fXoL"),s=n("d4MM"),u=n("tQKq"),m=n("AytR"),d=n("lJxs"),p=n("tk/3");let h=(()=>{class t{constructor(t){this.httpClient=t}getCommentsFromAnArticle(t){return this.httpClient.get(`${m.a.api_url}/articles/${t}/comments`)}addCommentsFromAnArticle(t,e){return this.httpClient.post(`${m.a.api_url}/articles/${t}/comments`,e).pipe(Object(d.a)(t=>t.comment))}deleteCommentsFromAnArticle(t,e){return this.httpClient.delete(`${m.a.api_url}/articles/${t}/comments/${e.toString()}`)}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(p.b))},t.\u0275prov=a.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=n("Qqcq"),f=n("s291"),L=n("kxWY"),v=n("1Djz"),M=n("XNiG"),x=n("1G5W");const C=function(t){return["/profile",t]};let w=(()=>{class t{constructor(t){this.userService=t,this.deleteComment=new a.n,this.unsubscribe$=new M.a}ngOnInit(){this.userService.currentUser.pipe(Object(x.a)(this.unsubscribe$)).subscribe(t=>this.canModify=t.username===this.comment.author.username)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}deleteClicked(){this.deleteComment.emit(!0)}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(u.a))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-article-comment"]],inputs:{comment:"comment"},outputs:{deleteComment:"deleteComment"},decls:15,vars:14,consts:[[1,"card"],[1,"card-block"],[1,"card-text"],[1,"card-footer"],[1,"comment-author",3,"routerLink"],[1,"comment-author-img",3,"src"],[1,"date-posted"],[1,"mod-options",3,"hidden"],[1,"ion-trash-a",3,"click"]],template:function(t,e){1&t&&(a.Mb(0,"div",0),a.Mb(1,"div",1),a.Mb(2,"p",2),a.oc(3),a.Lb(),a.Lb(),a.Mb(4,"div",3),a.Mb(5,"a",4),a.Ib(6,"img",5),a.Lb(),a.oc(7," \xa0 "),a.Mb(8,"a",4),a.oc(9),a.Lb(),a.Mb(10,"span",6),a.oc(11),a.Wb(12,"date"),a.Lb(),a.Mb(13,"span",7),a.Mb(14,"i",8),a.Tb("click",(function(){return e.deleteClicked()})),a.Lb(),a.Lb(),a.Lb(),a.Lb()),2&t&&(a.xb(3),a.qc(" ",null==e.comment?null:e.comment.body," "),a.xb(2),a.bc("routerLink",a.dc(10,C,null==e.comment?null:e.comment.author.username)),a.xb(1),a.bc("src",null==e.comment?null:e.comment.author.image,a.jc),a.xb(2),a.bc("routerLink",a.dc(12,C,null==e.comment?null:e.comment.author.username)),a.xb(1),a.qc(" ",null==e.comment?null:e.comment.author.username," "),a.xb(2),a.qc(" ",a.Yb(12,7,null==e.comment?null:e.comment.createdAt,"longDate")," "),a.xb(2),a.bc("hidden",!e.canModify))},directives:[c.f],pipes:[i.f],styles:[""]}),t})();function A(t,e){if(1&t&&(a.Mb(0,"li",30),a.oc(1),a.Lb()),2&t){const t=e.$implicit;a.xb(1),a.qc(" ",t," ")}}const k=function(){return["/login"]},F=function(){return["/register"]};function y(t,e){1&t&&(a.Mb(0,"div"),a.Mb(1,"a",31),a.oc(2,"Sign in"),a.Lb(),a.oc(3," or "),a.Mb(4,"a",31),a.oc(5,"sign up"),a.Lb(),a.oc(6," to add comments on this article. "),a.Lb()),2&t&&(a.xb(1),a.bc("routerLink",a.cc(2,k)),a.xb(3),a.bc("routerLink",a.cc(3,F)))}function S(t,e){if(1&t){const t=a.Nb();a.Mb(0,"app-article-comment",32),a.Tb("deleteComment",(function(){a.ic(t);const n=e.$implicit;return a.Vb().onDeleteComment(n)})),a.Lb()}2&t&&a.bc("comment",e.$implicit)}const O=function(t){return["/editor",t]},$=[{path:":slug",component:(()=>{class t{constructor(t,e,n,i,c){this.route=t,this.router=e,this.articleService=n,this.userService=i,this.commentService=c,this.isSubmitting=!1}ngOnInit(){this.route.params.pipe(Object(r.a)("slug"),Object(o.a)(t=>this.articleService.getSingleArticle(t).pipe(Object(l.a)(t=>this.article=t))),Object(o.a)(t=>this.commentService.getCommentsFromAnArticle(t.slug))).subscribe(t=>this.commentList=t),this.userService.currentUser.subscribe(t=>this.currentUser=t)}addComment(t){this.isSubmitting=!0,t.value&&this.commentService.addCommentsFromAnArticle(this.article.slug,{body:t.value}).pipe(Object(b.a)(()=>{this.isSubmitting=!1,t.value=""})).subscribe(t=>{this.commentList.comments.unshift(t)})}onDeleteComment(t){this.commentService.deleteCommentsFromAnArticle(this.article.slug,t.id).subscribe(e=>{this.commentList.comments=this.commentList.comments.filter(e=>e.id!==t.id)})}onToggleFollow(t){this.article.author.following=t}onToggleFavorite(t){this.article.favorited=t,t?this.article.favoritesCount++:this.article.favoritesCount--}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(c.a),a.Hb(c.c),a.Hb(s.a),a.Hb(u.a),a.Hb(h))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-article"]],decls:57,vars:27,consts:[[1,"article-page"],[1,"banner"],[1,"container"],[3,"article"],[3,"hidden"],[1,"btn","btn-sm","btn-outline-secondary",3,"routerLink"],[1,"ion-edit"],[1,"btn","btn-sm","btn-outline-danger"],[1,"ion-trash-a"],[3,"profile","toggle"],[3,"article","toggle"],[1,"counter"],[1,"container","page"],[1,"row","article-content"],[1,"col-md-12"],[1,"tag-list"],["class","tag-default tag-pill tag-outline",4,"ngFor","ngForOf"],[1,"article-actions"],[1,"row"],[1,"col-xs-12","col-md-8","offset-md-2"],[1,"card","comment-form"],[3,"disabled"],[1,"card-block"],["placeholder","Write a comment...","rows","3",1,"form-control"],["comment",""],[1,"card-footer"],[1,"comment-author-img",3,"src"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[4,"appShowAuthenticate"],[3,"comment","deleteComment",4,"ngFor","ngForOf"],[1,"tag-default","tag-pill","tag-outline"],[3,"routerLink"],[3,"comment","deleteComment"]],template:function(t,e){if(1&t){const t=a.Nb();a.Mb(0,"div",0),a.Mb(1,"div",1),a.Mb(2,"div",2),a.Mb(3,"h1"),a.oc(4),a.Lb(),a.Mb(5,"app-article-meta",3),a.Mb(6,"span",4),a.Mb(7,"a",5),a.Ib(8,"i",6),a.oc(9," Edit Article "),a.Lb(),a.Mb(10,"button",7),a.Ib(11,"i",8),a.oc(12," Delete Article "),a.Lb(),a.Lb(),a.Mb(13,"span",4),a.Mb(14,"app-button-follow",9),a.Tb("toggle",(function(t){return e.onToggleFollow(t)})),a.Lb(),a.Mb(15,"app-button-favorite",10),a.Tb("toggle",(function(t){return e.onToggleFavorite(t)})),a.oc(16),a.Mb(17,"span",11),a.oc(18),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Mb(19,"div",12),a.Mb(20,"div",13),a.Mb(21,"div",14),a.Mb(22,"div"),a.Mb(23,"p"),a.oc(24),a.Lb(),a.Lb(),a.Mb(25,"ul",15),a.nc(26,A,2,1,"li",16),a.Lb(),a.Lb(),a.Lb(),a.Ib(27,"hr"),a.Mb(28,"div",17),a.Mb(29,"app-article-meta",3),a.Mb(30,"span",4),a.Mb(31,"a",5),a.Ib(32,"i",6),a.oc(33," Edit Article "),a.Lb(),a.Mb(34,"button",7),a.Ib(35,"i",8),a.oc(36," Delete Article "),a.Lb(),a.Lb(),a.Mb(37,"span",4),a.Mb(38,"app-button-follow",9),a.Tb("toggle",(function(t){return e.onToggleFollow(t)})),a.Lb(),a.Mb(39,"app-button-favorite",10),a.Tb("toggle",(function(t){return e.onToggleFavorite(t)})),a.oc(40),a.Mb(41,"span",11),a.oc(42),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Mb(43,"div",18),a.Mb(44,"div",19),a.Mb(45,"div"),a.Mb(46,"form",20),a.Mb(47,"fieldset",21),a.Mb(48,"div",22),a.Ib(49,"textarea",23,24),a.Lb(),a.Mb(51,"div",25),a.Ib(52,"img",26),a.Mb(53,"button",27),a.Tb("click",(function(){a.ic(t);const n=a.hc(50);return e.addComment(n)})),a.oc(54," Post Comment "),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.nc(55,y,7,4,"div",28),a.nc(56,S,1,1,"app-article-comment",29),a.Lb(),a.Lb(),a.Lb(),a.Lb()}2&t&&(a.xb(4),a.pc(null==e.article?null:e.article.title),a.xb(1),a.bc("article",e.article),a.xb(1),a.bc("hidden",e.currentUser.username!==(null==e.article?null:e.article.author.username)),a.xb(1),a.bc("routerLink",a.dc(23,O,null==e.article?null:e.article.slug)),a.xb(6),a.bc("hidden",e.currentUser.username===(null==e.article?null:e.article.author.username)),a.xb(1),a.bc("profile",null==e.article?null:e.article.author),a.xb(1),a.bc("article",e.article),a.xb(1),a.qc(" ",null!=e.article&&e.article.favorited?"Unfavorite":"Favorite"," Article "),a.xb(2),a.qc("(",null==e.article?null:e.article.favoritesCount,")"),a.xb(6),a.pc(null==e.article?null:e.article.body),a.xb(2),a.bc("ngForOf",null==e.article?null:e.article.tagList),a.xb(3),a.bc("article",e.article),a.xb(1),a.bc("hidden",e.currentUser.username!==(null==e.article?null:e.article.author.username)),a.xb(1),a.bc("routerLink",a.dc(25,O,null==e.article?null:e.article.slug)),a.xb(6),a.bc("hidden",e.currentUser.username===(null==e.article?null:e.article.author.username)),a.xb(1),a.bc("profile",null==e.article?null:e.article.author),a.xb(1),a.bc("article",e.article),a.xb(1),a.qc(" ",null!=e.article&&e.article.favorited?"Unfavorite":"Favorite"," Article "),a.xb(2),a.qc("(",null==e.article?null:e.article.favoritesCount,")"),a.xb(5),a.bc("disabled",e.isSubmitting),a.xb(5),a.bc("src",e.currentUser.image,a.jc),a.xb(3),a.bc("appShowAuthenticate",!1),a.xb(1),a.bc("ngForOf",null==e.commentList?null:e.commentList.comments))},directives:[g.a,c.f,f.a,L.a,i.s,v.a,w],styles:["app-button-follow[_ngcontent-%COMP%]{margin-right:10px}"]}),t})()}];let T=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},imports:[[c.g.forChild($)],c.g]}),t})();var j=n("HaJA");let I=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},imports:[[i.c,T,j.a]]}),t})()}}]);