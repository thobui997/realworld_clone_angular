!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{rZHr:function(e,i,c){"use strict";c.r(i),c.d(i,"ArticleModule",(function(){return N}));var r,o,l=c("ofXK"),a=c("tyNb"),u=c("wO+i"),b=c("eIep"),s=c("vkgz"),m=c("nYR2"),f=c("fXoL"),d=c("d4MM"),p=c("tQKq"),h=c("AytR"),g=c("lJxs"),v=c("tk/3"),L=((r=function(){function e(n){t(this,e),this.httpClient=n}return n(e,[{key:"getCommentsFromAnArticle",value:function(t){return this.httpClient.get("".concat(h.a.api_url,"/articles/").concat(t,"/comments"))}},{key:"addCommentsFromAnArticle",value:function(t,e){return this.httpClient.post("".concat(h.a.api_url,"/articles/").concat(t,"/comments"),e).pipe(Object(g.a)((function(t){return t.comment})))}},{key:"deleteCommentsFromAnArticle",value:function(t,e){return this.httpClient.delete("".concat(h.a.api_url,"/articles/").concat(t,"/comments/").concat(e.toString()))}}]),e}()).\u0275fac=function(t){return new(t||r)(f.Qb(v.b))},r.\u0275prov=f.Db({token:r,factory:r.\u0275fac,providedIn:"root"}),r),M=c("Qqcq"),x=c("s291"),k=c("kxWY"),y=c("1Djz"),C=c("XNiG"),w=c("1G5W"),A=function(t){return["/profile",t]},F=((o=function(){function e(n){t(this,e),this.userService=n,this.deleteComment=new f.n,this.unsubscribe$=new C.a}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.userService.currentUser.pipe(Object(w.a)(this.unsubscribe$)).subscribe((function(e){return t.canModify=e.username===t.comment.author.username}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"deleteClicked",value:function(){this.deleteComment.emit(!0)}}]),e}()).\u0275fac=function(t){return new(t||o)(f.Hb(p.a))},o.\u0275cmp=f.Bb({type:o,selectors:[["app-article-comment"]],inputs:{comment:"comment"},outputs:{deleteComment:"deleteComment"},decls:15,vars:14,consts:[[1,"card"],[1,"card-block"],[1,"card-text"],[1,"card-footer"],[1,"comment-author",3,"routerLink"],[1,"comment-author-img",3,"src"],[1,"date-posted"],[1,"mod-options",3,"hidden"],[1,"ion-trash-a",3,"click"]],template:function(t,e){1&t&&(f.Mb(0,"div",0),f.Mb(1,"div",1),f.Mb(2,"p",2),f.oc(3),f.Lb(),f.Lb(),f.Mb(4,"div",3),f.Mb(5,"a",4),f.Ib(6,"img",5),f.Lb(),f.oc(7," \xa0 "),f.Mb(8,"a",4),f.oc(9),f.Lb(),f.Mb(10,"span",6),f.oc(11),f.Wb(12,"date"),f.Lb(),f.Mb(13,"span",7),f.Mb(14,"i",8),f.Tb("click",(function(){return e.deleteClicked()})),f.Lb(),f.Lb(),f.Lb(),f.Lb()),2&t&&(f.xb(3),f.qc(" ",null==e.comment?null:e.comment.body," "),f.xb(2),f.bc("routerLink",f.dc(10,A,null==e.comment?null:e.comment.author.username)),f.xb(1),f.bc("src",null==e.comment?null:e.comment.author.image,f.jc),f.xb(2),f.bc("routerLink",f.dc(12,A,null==e.comment?null:e.comment.author.username)),f.xb(1),f.qc(" ",null==e.comment?null:e.comment.author.username," "),f.xb(2),f.qc(" ",f.Yb(12,7,null==e.comment?null:e.comment.createdAt,"longDate")," "),f.xb(2),f.bc("hidden",!e.canModify))},directives:[a.f],pipes:[l.f],styles:[""]}),o);function S(t,e){if(1&t&&(f.Mb(0,"li",30),f.oc(1),f.Lb()),2&t){var n=e.$implicit;f.xb(1),f.qc(" ",n," ")}}var O=function(){return["/login"]},T=function(){return["/register"]};function j(t,e){1&t&&(f.Mb(0,"div"),f.Mb(1,"a",31),f.oc(2,"Sign in"),f.Lb(),f.oc(3," or "),f.Mb(4,"a",31),f.oc(5,"sign up"),f.Lb(),f.oc(6," to add comments on this article. "),f.Lb()),2&t&&(f.xb(1),f.bc("routerLink",f.cc(2,O)),f.xb(3),f.bc("routerLink",f.cc(3,T)))}function I(t,e){if(1&t){var n=f.Nb();f.Mb(0,"app-article-comment",32),f.Tb("deleteComment",(function(){f.ic(n);var t=e.$implicit;return f.Vb().onDeleteComment(t)})),f.Lb()}2&t&&f.bc("comment",e.$implicit)}var q,U,D,H=function(t){return["/editor",t]},$=[{path:":slug",component:(q=function(){function e(n,i,c,r,o){t(this,e),this.route=n,this.router=i,this.articleService=c,this.userService=r,this.commentService=o,this.isSubmitting=!1}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.route.params.pipe(Object(u.a)("slug"),Object(b.a)((function(e){return t.articleService.getSingleArticle(e).pipe(Object(s.a)((function(e){return t.article=e})))})),Object(b.a)((function(e){return t.commentService.getCommentsFromAnArticle(e.slug)}))).subscribe((function(e){return t.commentList=e})),this.userService.currentUser.subscribe((function(e){return t.currentUser=e}))}},{key:"addComment",value:function(t){var e=this;this.isSubmitting=!0,t.value&&this.commentService.addCommentsFromAnArticle(this.article.slug,{body:t.value}).pipe(Object(m.a)((function(){e.isSubmitting=!1,t.value=""}))).subscribe((function(t){e.commentList.comments.unshift(t)}))}},{key:"onDeleteComment",value:function(t){var e=this;this.commentService.deleteCommentsFromAnArticle(this.article.slug,t.id).subscribe((function(n){e.commentList.comments=e.commentList.comments.filter((function(e){return e.id!==t.id}))}))}},{key:"onToggleFollow",value:function(t){this.article.author.following=t}},{key:"onToggleFavorite",value:function(t){this.article.favorited=t,t?this.article.favoritesCount++:this.article.favoritesCount--}}]),e}(),q.\u0275fac=function(t){return new(t||q)(f.Hb(a.a),f.Hb(a.c),f.Hb(d.a),f.Hb(p.a),f.Hb(L))},q.\u0275cmp=f.Bb({type:q,selectors:[["app-article"]],decls:57,vars:27,consts:[[1,"article-page"],[1,"banner"],[1,"container"],[3,"article"],[3,"hidden"],[1,"btn","btn-sm","btn-outline-secondary",3,"routerLink"],[1,"ion-edit"],[1,"btn","btn-sm","btn-outline-danger"],[1,"ion-trash-a"],[3,"profile","toggle"],[3,"article","toggle"],[1,"counter"],[1,"container","page"],[1,"row","article-content"],[1,"col-md-12"],[1,"tag-list"],["class","tag-default tag-pill tag-outline",4,"ngFor","ngForOf"],[1,"article-actions"],[1,"row"],[1,"col-xs-12","col-md-8","offset-md-2"],[1,"card","comment-form"],[3,"disabled"],[1,"card-block"],["placeholder","Write a comment...","rows","3",1,"form-control"],["comment",""],[1,"card-footer"],[1,"comment-author-img",3,"src"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[4,"appShowAuthenticate"],[3,"comment","deleteComment",4,"ngFor","ngForOf"],[1,"tag-default","tag-pill","tag-outline"],[3,"routerLink"],[3,"comment","deleteComment"]],template:function(t,e){if(1&t){var n=f.Nb();f.Mb(0,"div",0),f.Mb(1,"div",1),f.Mb(2,"div",2),f.Mb(3,"h1"),f.oc(4),f.Lb(),f.Mb(5,"app-article-meta",3),f.Mb(6,"span",4),f.Mb(7,"a",5),f.Ib(8,"i",6),f.oc(9," Edit Article "),f.Lb(),f.Mb(10,"button",7),f.Ib(11,"i",8),f.oc(12," Delete Article "),f.Lb(),f.Lb(),f.Mb(13,"span",4),f.Mb(14,"app-button-follow",9),f.Tb("toggle",(function(t){return e.onToggleFollow(t)})),f.Lb(),f.Mb(15,"app-button-favorite",10),f.Tb("toggle",(function(t){return e.onToggleFavorite(t)})),f.oc(16),f.Mb(17,"span",11),f.oc(18),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Mb(19,"div",12),f.Mb(20,"div",13),f.Mb(21,"div",14),f.Mb(22,"div"),f.Mb(23,"p"),f.oc(24),f.Lb(),f.Lb(),f.Mb(25,"ul",15),f.nc(26,S,2,1,"li",16),f.Lb(),f.Lb(),f.Lb(),f.Ib(27,"hr"),f.Mb(28,"div",17),f.Mb(29,"app-article-meta",3),f.Mb(30,"span",4),f.Mb(31,"a",5),f.Ib(32,"i",6),f.oc(33," Edit Article "),f.Lb(),f.Mb(34,"button",7),f.Ib(35,"i",8),f.oc(36," Delete Article "),f.Lb(),f.Lb(),f.Mb(37,"span",4),f.Mb(38,"app-button-follow",9),f.Tb("toggle",(function(t){return e.onToggleFollow(t)})),f.Lb(),f.Mb(39,"app-button-favorite",10),f.Tb("toggle",(function(t){return e.onToggleFavorite(t)})),f.oc(40),f.Mb(41,"span",11),f.oc(42),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Mb(43,"div",18),f.Mb(44,"div",19),f.Mb(45,"div"),f.Mb(46,"form",20),f.Mb(47,"fieldset",21),f.Mb(48,"div",22),f.Ib(49,"textarea",23,24),f.Lb(),f.Mb(51,"div",25),f.Ib(52,"img",26),f.Mb(53,"button",27),f.Tb("click",(function(){f.ic(n);var t=f.hc(50);return e.addComment(t)})),f.oc(54," Post Comment "),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.Lb(),f.nc(55,j,7,4,"div",28),f.nc(56,I,1,1,"app-article-comment",29),f.Lb(),f.Lb(),f.Lb(),f.Lb()}2&t&&(f.xb(4),f.pc(null==e.article?null:e.article.title),f.xb(1),f.bc("article",e.article),f.xb(1),f.bc("hidden",e.currentUser.username!==(null==e.article?null:e.article.author.username)),f.xb(1),f.bc("routerLink",f.dc(23,H,null==e.article?null:e.article.slug)),f.xb(6),f.bc("hidden",e.currentUser.username===(null==e.article?null:e.article.author.username)),f.xb(1),f.bc("profile",null==e.article?null:e.article.author),f.xb(1),f.bc("article",e.article),f.xb(1),f.qc(" ",null!=e.article&&e.article.favorited?"Unfavorite":"Favorite"," Article "),f.xb(2),f.qc("(",null==e.article?null:e.article.favoritesCount,")"),f.xb(6),f.pc(null==e.article?null:e.article.body),f.xb(2),f.bc("ngForOf",null==e.article?null:e.article.tagList),f.xb(3),f.bc("article",e.article),f.xb(1),f.bc("hidden",e.currentUser.username!==(null==e.article?null:e.article.author.username)),f.xb(1),f.bc("routerLink",f.dc(25,H,null==e.article?null:e.article.slug)),f.xb(6),f.bc("hidden",e.currentUser.username===(null==e.article?null:e.article.author.username)),f.xb(1),f.bc("profile",null==e.article?null:e.article.author),f.xb(1),f.bc("article",e.article),f.xb(1),f.qc(" ",null!=e.article&&e.article.favorited?"Unfavorite":"Favorite"," Article "),f.xb(2),f.qc("(",null==e.article?null:e.article.favoritesCount,")"),f.xb(5),f.bc("disabled",e.isSubmitting),f.xb(5),f.bc("src",e.currentUser.image,f.jc),f.xb(3),f.bc("appShowAuthenticate",!1),f.xb(1),f.bc("ngForOf",null==e.commentList?null:e.commentList.comments))},directives:[M.a,a.f,x.a,k.a,l.s,y.a,F],styles:["app-button-follow[_ngcontent-%COMP%]{margin-right:10px}"]}),q)}],E=((U=function e(){t(this,e)}).\u0275mod=f.Fb({type:U}),U.\u0275inj=f.Eb({factory:function(t){return new(t||U)},imports:[[a.g.forChild($)],a.g]}),U),J=c("HaJA"),N=((D=function e(){t(this,e)}).\u0275mod=f.Fb({type:D}),D.\u0275inj=f.Eb({factory:function(t){return new(t||D)},imports:[[l.c,E,J.a]]}),D)}}])}();